<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì„±ê²½ ê³µë¶€ ì‹œë®¬ë ˆì´í„°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f4f4f7;
      color: #222;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      padding: 1.5rem 1.5rem 0.5rem;
      text-align: center;
    }

    header h1 {
      font-size: 1.9rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      margin-bottom: 0.5rem;
    }

    header p {
      font-size: 0.95rem;
      color: #555;
      max-width: 520px;
      margin: 0.25rem auto;
    }

    /* ì²« í™”ë©´ì—ì„œë§Œ ë³´ì´ê³ , ë‹¤ë¥¸ í™”ë©´ì—ì„œëŠ” JSê°€ header-hidden í´ë˜ìŠ¤ë¥¼ ë¶™ì—¬ ìˆ¨ê¹€ */
    .header-hidden {
      display: none;
    }

    main {
      flex: 1;
      padding: 1rem 1.5rem 2rem;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
    }

    footer {
      padding: 0.75rem 1.5rem 1.25rem;
      text-align: center;
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .hidden {
      display: none;
    }

    /* === ì²« í™”ë©´: 66ê¶Œ ê·¸ë¦¬ë“œ === */

    #booksView {
      width: 100%;
    }

    .books-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 1rem;
    }

    .book-card {
      position: relative;
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease;
      transform-origin: center bottom;
      border: none;
      background: transparent;
    }

    .book-card:focus-visible {
      outline: 2px solid #1e4fd4;
      outline-offset: 4px;
    }

    .book-card:hover {
      transform: translateY(-4px);
    }

    .book-inner {
      position: relative;
      background: #fefefe;
      border-radius: 10px;
      padding: 0.6rem;
      box-shadow:
        0 1px 2px rgba(0, 0, 0, 0.08),
        0 5px 12px rgba(15, 23, 42, 0.12);
      border-left: 6px solid #c4b5fd;
      height: 180px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }

    .book-cover-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.25rem;
    }

    .book-tag {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 0.1rem 0.4rem;
      border-radius: 999px;
      background: #eef2ff;
      color: #3730a3;
      font-weight: 600;
      flex-shrink: 0;
    }

    .book-number {
      font-size: 0.65rem;
      color: #888;
      flex-shrink: 0;
    }

    .book-image {
      margin-top: 0.4rem;
      background: linear-gradient(135deg, #e5e7eb, #d1d5db);
      border-radius: 8px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .book-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .book-image span {
      font-size: 1.7rem;
      font-weight: 700;
      color: rgba(31, 41, 55, 0.8);
    }

    .book-image::after {
      content: "ëŒ€í‘œ ì´ë¯¸ì§€ ìë¦¬";
      position: absolute;
      bottom: 4px;
      right: 6px;
      font-size: 0.6rem;
      color: rgba(55, 65, 81, 0.65);
      background: rgba(249, 250, 251, 0.7);
      padding: 1px 4px;
      border-radius: 999px;
    }

    .book-image.has-image::after {
      content: "";
    }

    .book-title-ko {
      margin-top: 0.45rem;
      font-size: 0.9rem;
      font-weight: 600;
      color: #111827;
    }

    .book-title-en {
      font-size: 0.7rem;
      color: #6b7280;
    }

    .book-meta {
      margin-top: 0.4rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .book-meta span {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
    }

    /* === ê³µí†µ back ë²„íŠ¼ === */

    .back-btn {
      border: none;
      background: transparent;
      color: #4b5563;
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      cursor: pointer;
      margin-bottom: 0.75rem;
    }

    .back-btn::before {
      content: "â†";
      font-size: 0.9rem;
    }

    .back-btn:hover {
      color: #111827;
    }

    /* === ì°½ì„¸ê¸° ì±•í„° ì„ íƒ í™”ë©´ === */

    #genesisChaptersView {
      max-width: 960px;
      margin: 0 auto;
    }

    #genesisChaptersView h2 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    #genesisChaptersView p {
      font-size: 0.9rem;
      color: #4b5563;
      margin-bottom: 1rem;
    }

    .chapter-list {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .chapter-card {
      width: 100%;
      border-radius: 14px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: stretch;
      padding: 0;
      overflow: hidden;
      background: #fefefe;
      box-shadow:
        0 1px 2px rgba(0, 0, 0, 0.06),
        0 6px 16px rgba(15, 23, 42, 0.15);
      text-align: left;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .chapter-card:hover {
      transform: translateY(-2px);
      box-shadow:
        0 4px 10px rgba(0, 0, 0, 0.05),
        0 14px 30px rgba(15, 23, 42, 0.18);
    }

    .chapter-thumb {
      width: 38%;
      min-width: 230px;
      height: 180px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
    }

    .chapter-thumb::after {
      content: "";
    }

    .chapter-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .chapter-info {
      flex: 1;
      padding: 1rem 1.2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 0.35rem;
    }

    .chapter-label {
      font-size: 0.7rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #9ca3af;
      font-weight: 600;
    }

    .chapter-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: #111827;
    }

    .chapter-desc {
      font-size: 0.9rem;
      color: #4b5563;
    }

    @media (max-width: 720px) {
      .chapter-card {
        flex-direction: column;
      }
      .chapter-thumb {
        width: 100%;
        min-width: auto;
        height: 160px;
      }
    }

    /* === ì„ ì•…ê³¼ ê²Œì„ í™”ë©´ === */

    #edenGameView {
      max-width: 1100px;
      margin: 0 auto;
    }

    #edenGameView h2 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .eden-subtitle {
      font-size: 0.9rem;
      color: #4b5563;
      margin-bottom: 1rem;
    }

    .eden-layout {
      display: flex;
      gap: 1.2rem;
      align-items: flex-start;
    }

    .eden-left {
      flex: 3;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .eden-right {
      flex: 2;
      background: #f9fafb;
      border-radius: 12px;
      padding: 0.8rem 0.9rem;
      box-shadow:
        0 1px 2px rgba(0, 0, 0, 0.03),
        0 8px 18px rgba(15, 23, 42, 0.08);
    }

    .eden-right h3 {
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 0.4rem;
    }

    .bible-scroll {
      max-height: 360px;
      overflow-y: auto;
      padding-right: 0.3rem;
      font-size: 0.85rem;
      line-height: 1.6;
      color: #374151;
    }

    .bible-scroll p + p {
      margin-top: 0.2rem;
    }

    .verse-ref {
      font-weight: 600;
      color: #111827;
      margin-top: 0.5rem;
    }

    .verse-line {
      padding-left: 0.4rem;
    }

    .mission-box {
      background: linear-gradient(135deg, #eef2ff, #e0f2fe);
      border-radius: 12px;
      padding: 0.7rem 0.8rem;
      box-shadow:
        0 1px 3px rgba(0, 0, 0, 0.08),
        0 8px 18px rgba(15, 23, 42, 0.15);
    }

    .mission-box h3 {
      font-size: 0.9rem;
      font-weight: 700;
      margin-bottom: 0.3rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .mission-box h3::before {
      content: "ğŸ¯";
      font-size: 1rem;
    }

    .mission-box ul {
      list-style: none;
      font-size: 0.85rem;
      color: #1f2937;
    }

    .mission-box li + li {
      margin-top: 0.15rem;
    }

    .mission-note {
      font-size: 0.8rem;
      color: #4b5563;
    }

    .game-box {
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      box-shadow:
        0 1px 3px rgba(0, 0, 0, 0.08),
        0 10px 22px rgba(15, 23, 42, 0.18);
      background: radial-gradient(circle at top left, #bbf7d0, #a5f3fc, #fef9c3);
    }

    /* ìº”ë²„ìŠ¤ê°€ ê²Œì„ ë°•ìŠ¤ ê°€ë¡œ ì „ì²´ë¥¼ ì±„ìš°ë„ë¡ max-width ì œê±° */
    #edenCanvas {
      display: block;
      width: 100%;
      height: auto;
      background: transparent;
    }

    .game-overlay-dark {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.75));
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .game-overlay-dark.active {
      opacity: 1;
    }

    .dialogue-box {
      margin-top: 0.4rem;
      font-size: 0.85rem;
      background: #fefce8;
      border-radius: 10px;
      padding: 0.5rem 0.6rem;
      color: #43302b;
      border: 1px solid #facc15;
      min-height: 44px;
      display: flex;
      align-items: center;
    }

    .dialogue-box.empty {
      background: transparent;
      border-color: transparent;
      min-height: 28px;
    }

    @media (max-width: 900px) {
      .eden-layout {
        flex-direction: column;
      }
      .eden-right {
        width: 100%;
      }
      #edenCanvas {
        width: 100%;
      }
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 1.4rem;
      }

      .book-inner {
        height: 160px;
      }
    }
  </style>
</head>
<body>
  <header id="pageHeader">
    <h1>Bible Simulator</h1>
    <p>66ê¶Œ ì„±ê²½ì„ ì±… ëª¨ì–‘ìœ¼ë¡œ í•œëˆˆì— ë³´ê³ , ê° ê¶Œì„ í´ë¦­í•´ ìŠ¤í† ë¦¬ì™€ ë¯¸ë‹ˆê²Œì„ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” ì²« í™”ë©´ì…ë‹ˆë‹¤.</p>
    <p>ë¨¼ì € ì°½ì„¸ê¸°ì˜ "ì„ ì•…ê³¼" ì±•í„°ë¥¼ ê²Œì„ìœ¼ë¡œ ì²´í—˜í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  </header>

  <main>
    <!-- 1. ì „ì²´ ì„±ê²½ 66ê¶Œ ë·° -->
    <section id="booksView">
      <section class="books-grid" id="booksGrid" aria-label="ì„±ê²½ 66ê¶Œ ëª©ë¡"></section>
    </section>

    <!-- 2. ì°½ì„¸ê¸° ì±•í„° ì„ íƒ ë·° -->
    <section id="genesisChaptersView" class="hidden" aria-label="ì°½ì„¸ê¸° ì±•í„° ì„ íƒ">
      <button class="back-btn" id="backToBooks">ì „ì²´ ì„±ê²½ìœ¼ë¡œ</button>
      <h2>ì°½ì„¸ê¸° Â· Genesis</h2>
      <p>ì°½ì„¸ê¸°ì˜ í° ì´ì•¼ê¸° íë¦„ì„ ì±•í„°ì²˜ëŸ¼ ë‚˜ëˆ„ì–´, ê° ì‚¬ê±´ì„ ê²Œì„ê³¼ ë§ì”€ìœ¼ë¡œ ì²´í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

      <div class="chapter-list">
        <!-- CHAPTER 1: ì„ ì•…ê³¼ -->
        <button class="chapter-card" id="edenChapterBtn" type="button" aria-label="Chapter 1 ì„ ì•…ê³¼ë¡œ ì´ë™">
          <div class="chapter-thumb">
            <img src="assets/genesis assets/forbidden fruit/forbidden fruit banner.png"
                 alt="ì„ ì•…ê³¼ ì±•í„° ë°°ë„ˆ ì´ë¯¸ì§€" />
          </div>

          <div class="chapter-info">
            <div class="chapter-label">CHAPTER 1</div>
            <div class="chapter-title">ì„ ì•…ê³¼ì™€ íƒ€ë½</div>
            <div class="chapter-desc">
              ì—ë´ë™ì‚°ì—ì„œ ë±€ì˜ ìœ í˜¹ê³¼ ì„ ì•…ê³¼ ì‚¬ê±´ì„, ê°„ë‹¨í•œ ë¯¸ë‹ˆê²Œì„ê³¼ ë§ì”€ ë¬µìƒìœ¼ë¡œ ì²´í—˜í•©ë‹ˆë‹¤.
            </div>
          </div>
        </button>
      </div>
    </section>

    <!-- 3. ì„ ì•…ê³¼ ê²Œì„ ë·° -->
    <section id="edenGameView" class="hidden" aria-label="ì°½ì„¸ê¸° ì„ ì•…ê³¼ ì‹œë®¬ë ˆì´í„°">
      <button class="back-btn" id="backToGenesisChapters">ì°½ì„¸ê¸° ì±•í„° ëª©ë¡ìœ¼ë¡œ</button>
      <h2>ì°½ì„¸ê¸° CHAPTER 1 Â· ì„ ì•…ê³¼</h2>
      <p class="eden-subtitle">
        ë°©í–¥í‚¤(â†‘ â†“ â† â†’)ë¡œ ëª¨ì„¸ ìºë¦­í„°ë¥¼ ì›€ì§ì—¬, ê¸¸ì„ ë”°ë¼ ë±€ì´ ìˆëŠ” ë‚˜ë¬´ê¹Œì§€ ì´ë™í•´ ë³´ì„¸ìš”.
      </p>

      <div class="eden-layout">
        <!-- ì™¼ìª½: ë¯¸ì…˜ + ê²Œì„ -->
        <div class="eden-left">
          <div class="mission-box">
            <h3>ë¯¸ì…˜</h3>
            <ul>
              <li><strong>ë¯¸ì…˜ 1.</strong> ê¸¸ì„ ë”°ë¼ ë±€ì´ ìˆëŠ” ë‚˜ë¬´ê¹Œì§€ ì´ë™í•´ì„œ ë§ ê±¸ê¸°</li>
              <li class="mission-note">í‚¤ë³´ë“œ ë°©í–¥í‚¤(â†‘ â†“ â† â†’)ë¡œ ìºë¦­í„°ë¥¼ ì´ë™í•˜ì„¸ìš”. ë²½ì€ ì§€ë‚˜ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>
            </ul>
          </div>

          <div class="game-box">
            <canvas id="edenCanvas" width="480" height="320"></canvas>
            <div class="game-overlay-dark" id="edenOverlay"></div>
          </div>

          <div class="dialogue-box empty" id="dialogueBox"></div>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ë§ì”€ ìŠ¤í¬ë¡¤ -->
        <aside class="eden-right">
          <h3>ë§ì”€ ì½ê¸° (ì˜ˆ: ì°½ì„¸ê¸° 2â€“3ì¥)</h3>
          <div class="bible-scroll">
            <p></p>
            <p class="verse-ref">ì°½ì„¸ê¸° 2:16â€“17</p>
            <p class="verse-line">â€œë™ì‚° ê°ì¢… ë‚˜ë¬´ì˜ ì—´ë§¤ëŠ” ë„¤ê°€ ììœ ë¡­ê²Œ ë¨¹ì„ ìˆ˜ ìˆì§€ë§Œ, ì„ ì•…ì„ ì•Œê²Œ í•˜ëŠ” ë‚˜ë¬´ì˜ ì—´ë§¤ëŠ” ë¨¹ì§€ ë§ë¼.â€(ì„ ì•…ê³¼ëŠ” ë¨¹ì§€ ë§ë¼ê³  ë§í•˜ì…¨ìŒ)</p>

            <p class="verse-ref">ì°½ì„¸ê¸° 3:1</p>
            <p class="verse-line">â€œë±€ì€ ì—¬í˜¸ì™€ê»˜ì„œ ë§Œë“œì‹  ë“¤ì§ìŠ¹ ì¤‘ì—ì„œ ê°€ì¥ ê°„êµí•˜ì˜€ë‹¤.â€</p>

            <p class="verse-ref">ë¬µìƒ í¬ì¸íŠ¸</p>
            <p class="verse-line">Â· í•˜ë‚˜ë‹˜ì´ ë¨¼ì € â€˜ììœ ë¡­ê²Œ ë¨¹ì–´ë„ ë˜ëŠ” ê²ƒâ€™ì„ ì¶©ë¶„íˆ í—ˆë½í•˜ì…¨ë‹¤ëŠ” ì </p>
            <p class="verse-line">Â· ë±€ì˜ ìœ í˜¹ì´ í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì„ ì‚´ì§ ë¹„í‹€ì–´ì„œ ì‹œì‘ë˜ì—ˆë‹¤ëŠ” ì </p>
            <p class="verse-line">Â· ì„ ì•…ê³¼ ì‚¬ê±´ ì´í›„, í•˜ë‚˜ë‹˜ê³¼ì˜ ê´€ê³„Â·ìì‹ ì— ëŒ€í•œ ì‹œì„ Â·ì„œë¡œì— ëŒ€í•œ ì‹œì„ ì´ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì‚´í´ë³´ê¸°</p>

            <p class="verse-ref">ì‚¶ì— ì ìš©í•˜ê¸°</p>
            <p class="verse-line">Â· í—ˆë½í•˜ì‹  ê²ƒì— ë¨¼ì € ê°ì‚¬í•˜ê¸°</p>
            <p class="verse-line">Â· ë§ì”€ì„ ì •í™•íˆ ì•Œê¸°</p>
            <p class="verse-line">Â· ì„ íƒì´ í—·ê°ˆë¦´ ë•Œ, ì´ ì„ íƒì´ í•˜ë‚˜ë‹˜ì´ ë³´ì‹œê¸°ì—ë„ ê¸°ì ì§€ ìƒê°í•´ë³´ê¸°</p>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <footer>
    Bible Simulator
  </footer>

  <script>
    // === 66ê¶Œ ë°ì´í„° ===
    const books = [
      // êµ¬ì•½ 39
      { id: 1,  ko: "ì°½ì„¸ê¸°",    en: "Genesis",       part: "OT", img: "genesis.png" },
      { id: 2,  ko: "ì¶œì• êµ½ê¸°",  en: "Exodus",        part: "OT", img: "exodus.png" },
      { id: 3,  ko: "ë ˆìœ„ê¸°",    en: "Leviticus",     part: "OT", img: "leviticus.png" },
      { id: 4,  ko: "ë¯¼ìˆ˜ê¸°",    en: "Numbers",       part: "OT", img: "numbers.png" },
      { id: 5,  ko: "ì‹ ëª…ê¸°",    en: "Deuteronomy",   part: "OT", img: "deuteronomy.png" },
      { id: 6,  ko: "ì—¬í˜¸ìˆ˜ì•„",  en: "Joshua",        part: "OT", img: "joshua.png" },
      { id: 7,  ko: "ì‚¬ì‚¬ê¸°",    en: "Judges",        part: "OT", img: "judges.png" },
      { id: 8,  ko: "ë£»ê¸°",      en: "Ruth",          part: "OT", img: "ruth.png" },
      { id: 9,  ko: "ì‚¬ë¬´ì—˜ìƒ",  en: "1 Samuel",      part: "OT", img: "1 samuel.png" },
      { id: 10, ko: "ì‚¬ë¬´ì—˜í•˜",  en: "2 Samuel",      part: "OT", img: "2 samuel.png" },
      { id: 11, ko: "ì—´ì™•ê¸°ìƒ",  en: "1 Kings",       part: "OT", img: "1 kings.png" },
      { id: 12, ko: "ì—´ì™•ê¸°í•˜",  en: "2 Kings",       part: "OT", img: "2 kings.png" },
      { id: 13, ko: "ì—­ëŒ€ìƒ",    en: "1 Chronicles",  part: "OT", img: "1 chronicles.png" },
      { id: 14, ko: "ì—­ëŒ€í•˜",    en: "2 Chronicles",  part: "OT", img: "2 chronicles.png" },
      { id: 15, ko: "ì—ìŠ¤ë¼",    en: "Ezra",          part: "OT", img: "ezra.png" },
      { id: 16, ko: "ëŠí—¤ë¯¸ì•¼",  en: "Nehemiah",      part: "OT", img: "nehemiah.png" },
      { id: 17, ko: "ì—ìŠ¤ë”",    en: "Esther",        part: "OT", img: "esther.png" },
      { id: 18, ko: "ìš¥ê¸°",      en: "Job",           part: "OT", img: "job.png" },
      { id: 19, ko: "ì‹œí¸",      en: "Psalms",        part: "OT", img: "psalms.png" },
      { id: 20, ko: "ì ì–¸",      en: "Proverbs",      part: "OT", img: "proverbs.png" },
      { id: 21, ko: "ì „ë„ì„œ",    en: "Ecclesiastes",  part: "OT", img: "ecclesiastes.png" },
      { id: 22, ko: "ì•„ê°€",      en: "Song of Songs", part: "OT", img: "song of songs.png" },
      { id: 23, ko: "ì´ì‚¬ì•¼",    en: "Isaiah",        part: "OT", img: "isaiah.png" },
      { id: 24, ko: "ì˜ˆë ˆë¯¸ì•¼",  en: "Jeremiah",      part: "OT", img: "jeremiah.png" },
      { id: 25, ko: "ì˜ˆë ˆë¯¸ì•¼ì• ê°€", en: "Lamentations", part: "OT", img: "lamentations.png" },
      { id: 26, ko: "ì—ìŠ¤ê²”",    en: "Ezekiel",       part: "OT", img: "ezekiel.png" },
      { id: 27, ko: "ë‹¤ë‹ˆì—˜",    en: "Daniel",        part: "OT", img: "daniel.png" },
      { id: 28, ko: "í˜¸ì„¸ì•„",    en: "Hosea",         part: "OT", img: "hosea.png" },
      { id: 29, ko: "ìš”ì—˜",      en: "Joel",          part: "OT", img: "joel.png" },
      { id: 30, ko: "ì•„ëª¨ìŠ¤",    en: "Amos",          part: "OT", img: "amos.png" },
      { id: 31, ko: "ì˜¤ë°”ëŒœ",    en: "Obadiah",       part: "OT", img: "obadiah.png" },
      { id: 32, ko: "ìš”ë‚˜",      en: "Jonah",         part: "OT", img: "jonah.png" },
      { id: 33, ko: "ë¯¸ê°€",      en: "Micah",         part: "OT", img: "micah.png" },
      { id: 34, ko: "ë‚˜í›”",      en: "Nahum",         part: "OT", img: "nahum.png" },
      { id: 35, ko: "í•˜ë°•êµ­",    en: "Habakkuk",      part: "OT", img: "habakkuk.png" },
      { id: 36, ko: "ìŠ¤ë°”ëƒ",    en: "Zephaniah",     part: "OT", img: "zephaniah.png" },
      { id: 37, ko: "í•™ê°œ",      en: "Haggai",        part: "OT", img: "haggai.png" },
      { id: 38, ko: "ìŠ¤ê°€ë´",    en: "Zechariah",     part: "OT", img: "zechariah.png" },
      { id: 39, ko: "ë§ë¼ê¸°",    en: "Malachi",       part: "OT", img: "malachi.png" },

      // ì‹ ì•½ 27
      { id: 40, ko: "ë§ˆíƒœë³µìŒ",   en: "Matthew",       part: "NT", img: "matthew.png" },
      { id: 41, ko: "ë§ˆê°€ë³µìŒ",   en: "Mark",          part: "NT", img: "mark.png" },
      { id: 42, ko: "ëˆ„ê°€ë³µìŒ",   en: "Luke",          part: "NT", img: "luke.png" },
      { id: 43, ko: "ìš”í•œë³µìŒ",   en: "John",          part: "NT", img: "john.png" },
      { id: 44, ko: "ì‚¬ë„í–‰ì „",   en: "Acts",          part: "NT", img: "acts.png" },
      { id: 45, ko: "ë¡œë§ˆì„œ",     en: "Romans",        part: "NT", img: "romans.png" },
      { id: 46, ko: "ê³ ë¦°ë„ì „ì„œ", en: "1 Corinthians", part: "NT", img: "1 corinthians.png" },
      { id: 47, ko: "ê³ ë¦°ë„í›„ì„œ", en: "2 Corinthians", part: "NT", img: "2 corinthians.png" },
      { id: 48, ko: "ê°ˆë¼ë””ì•„ì„œ", en: "Galatians",     part: "NT", img: "galatians.png" },
      { id: 49, ko: "ì—ë² ì†Œì„œ",   en: "Ephesians",     part: "NT", img: "ephesians.png" },
      { id: 50, ko: "ë¹Œë¦½ë³´ì„œ",   en: "Philippians",   part: "NT", img: "philippians.png" },
      { id: 51, ko: "ê³¨ë¡œìƒˆì„œ",   en: "Colossians",    part: "NT", img: "colossians.png" },
      { id: 52, ko: "ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ", en: "1 Thessalonians", part: "NT", img: "1 thessalonians.png" },
      { id: 53, ko: "ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ", en: "2 Thessalonians", part: "NT", img: "2 thessalonians.png" },
      { id: 54, ko: "ë””ëª¨ë°ì „ì„œ", en: "1 Timothy",     part: "NT", img: "1 timothy.png" },
      { id: 55, ko: "ë””ëª¨ë°í›„ì„œ", en: "2 Timothy",     part: "NT", img: "2 timothy.png" },
      { id: 56, ko: "ë””ë„ì„œ",     en: "Titus",         part: "NT", img: "titus.png" },
      { id: 57, ko: "ë¹Œë ˆëª¬ì„œ",   en: "Philemon",      part: "NT", img: "philemon.png" },
      { id: 58, ko: "íˆë¸Œë¦¬ì„œ",   en: "Hebrews",       part: "NT", img: "hebrews.png" },
      { id: 59, ko: "ì•¼ê³ ë³´ì„œ",   en: "James",         part: "NT", img: "james.png" },
      { id: 60, ko: "ë² ë“œë¡œì „ì„œ", en: "1 Peter",       part: "NT", img: "1 peter.png" },
      { id: 61, ko: "ë² ë“œë¡œí›„ì„œ", en: "2 Peter",       part: "NT", img: "2 peter.png" },
      { id: 62, ko: "ìš”í•œì¼ì„œ",   en: "1 John",        part: "NT", img: "1 john.png" },
      { id: 63, ko: "ìš”í•œì´ì„œ",   en: "2 John",        part: "NT", img: "2 john.png" },
      { id: 64, ko: "ìš”í•œì‚¼ì„œ",   en: "3 John",        part: "NT", img: "3 john.png" },
      { id: 65, ko: "ìœ ë‹¤ì„œ",     en: "Jude",          part: "NT", img: "jude.png" },
      { id: 66, ko: "ìš”í•œê³„ì‹œë¡", en: "Revelation",    part: "NT", img: "revelation.png" }
    ];

    // DOM
    const booksGrid = document.getElementById("booksGrid");
    const booksView = document.getElementById("booksView");
    const genesisChaptersView = document.getElementById("genesisChaptersView");
    const edenGameView = document.getElementById("edenGameView");
    const pageHeader = document.getElementById("pageHeader");

    const backToBooksBtn = document.getElementById("backToBooks");
    const edenChapterBtn = document.getElementById("edenChapterBtn");
    const backToGenesisChaptersBtn = document.getElementById("backToGenesisChapters");

    function showView(target) {
      booksView.classList.add("hidden");
      genesisChaptersView.classList.add("hidden");
      edenGameView.classList.add("hidden");
      target.classList.remove("hidden");

      // ì²« í™”ë©´(66ê¶Œ ê·¸ë¦¬ë“œ)ì¼ ë•Œë§Œ í—¤ë” ë³´ì´ê¸°
      if (target === booksView) {
        pageHeader.classList.remove("header-hidden");
      } else {
        pageHeader.classList.add("header-hidden");
      }
    }

    // 66ê¶Œ ì¹´ë“œ ê·¸ë¦¬ê¸°
    books.forEach((book) => {
      const card = document.createElement("button");
      card.className = "book-card";
      card.type = "button";
      card.setAttribute("data-id", book.id);
      card.setAttribute("data-part", book.part);
      card.setAttribute("aria-label", `${book.ko} (${book.en}) í˜ì´ì§€ë¡œ ì´ë™`);

      const inner = document.createElement("div");
      inner.className = "book-inner";

      const topRow = document.createElement("div");
      topRow.className = "book-cover-top";

      const tag = document.createElement("span");
      tag.className = "book-tag";
      tag.textContent = book.part === "OT" ? "êµ¬ì•½" : "ì‹ ì•½";

      const num = document.createElement("span");
      num.className = "book-number";
      num.textContent = `#${book.id}`;

      topRow.appendChild(tag);
      topRow.appendChild(num);

      const imgBox = document.createElement("div");
      imgBox.className = "book-image";

      if (book.img) {
        imgBox.classList.add("has-image");
        const img = document.createElement("img");
        img.src = `assets/books/images/${book.img}`;
        img.alt = `${book.ko} ëŒ€í‘œ ì´ë¯¸ì§€`;
        imgBox.appendChild(img);
      } else {
        const imgInitial = document.createElement("span");
        imgInitial.textContent = book.ko[0];
        imgBox.appendChild(imgInitial);
      }

      const titleKo = document.createElement("div");
      titleKo.className = "book-title-ko";
      titleKo.textContent = book.ko;

      const titleEn = document.createElement("div");
      titleEn.className = "book-title-en";
      titleEn.textContent = book.en;

      const meta = document.createElement("div");
      meta.className = "book-meta";

      const partSpan = document.createElement("span");
      partSpan.textContent = book.part === "OT" ? "Old Testament" : "New Testament";

      const hintSpan = document.createElement("span");
      hintSpan.textContent = "í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°";

      meta.appendChild(partSpan);
      meta.appendChild(hintSpan);

      inner.appendChild(topRow);
      inner.appendChild(imgBox);
      inner.appendChild(titleKo);
      inner.appendChild(titleEn);
      inner.appendChild(meta);

      card.appendChild(inner);
      booksGrid.appendChild(card);
    });

    booksGrid.addEventListener("click", (e) => {
      const card = e.target.closest(".book-card");
      if (!card) return;
      const id = Number(card.getAttribute("data-id"));
      const book = books.find((b) => b.id === id);
      if (!book) return;

      if (id === 1) {
        showView(genesisChaptersView);
      } else {
        alert(`"${book.ĞºĞ¾}" ì‹œë®¬ë ˆì´í„° í˜ì´ì§€ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!`);
      }
    });

    backToBooksBtn.addEventListener("click", () => {
      stopEdenGame();
      showView(booksView);
    });

    backToGenesisChaptersBtn.addEventListener("click", () => {
      stopEdenGame();
      showView(genesisChaptersView);
    });

    edenChapterBtn.addEventListener("click", () => {
      showView(edenGameView);
      startEdenGame();
    });

    // === ì„ ì•…ê³¼ ê²Œì„ ===
    const edenCanvas = document.getElementById("edenCanvas");
    const edenOverlay = document.getElementById("edenOverlay");
    const dialogueBox = document.getElementById("dialogueBox");
    const ctx = edenCanvas.getContext("2d");

    // ëª¨ì„¸, ë±€+ë‚˜ë¬´ ì´ë¯¸ì§€
    const playerImg = new Image();
    playerImg.src = "assets/genesis assets/forbidden fruit/mose.png";

    const snakeImg = new Image();
    snakeImg.src = "assets/genesis assets/forbidden fruit/snake.png";

    // ë±€+ë‚˜ë¬´ í¬ê¸° ìŠ¤ì¼€ì¼ (ë ˆë²¨ì— ì •ì˜ëœ ê°’ì˜ 2/3)
    const SNAKE_SCALE = 2 / 3;

    // ê³µí†µ ë°”ê¹¥ í…Œë‘ë¦¬ (ìº”ë²„ìŠ¤ ì „ì²´)
    const baseWalls = [
      { x: 0,   y: 0,   width: 480, height: 20 },
      { x: 0,   y: 300, width: 480, height: 20 },
      { x: 0,   y: 0,   width: 20,  height: 320 },
      { x: 460, y: 0,   width: 20,  height: 320 }
    ];

    // ì—¬ëŸ¬ ë¯¸ë¡œ ë ˆì´ì•„ì›ƒ (10ê°œ)
    const edenLevels = [
      // 1. ê¸°ë³¸ ë¯¸ë¡œ (í˜„ì¬ ê²ƒê³¼ ë¹„ìŠ·)
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 80, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 240, width: 320, height: 20 },
          { x: 80,  y: 140, width: 20,  height: 100 },
          { x: 200, y: 80,  width: 20,  height: 160 },
          { x: 200, y: 80,  width: 180, height: 20 }
        ])
      },
      // 2. ì§€ê·¸ì¬ê·¸ í†µë¡œ
      {
        player: { x: 60, y: 270 },
        snakeTree: { x: 400, y: 70, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 60,  y: 220, width: 340, height: 20 },
          { x: 160, y: 120, width: 20,  height: 200 },
          { x: 260, y: 80,  width: 20,  height: 240 },
          { x: 160, y: 120, width: 120, height: 20 },
          { x: 360, y: 140, width: 20,  height: 140 }
        ])
      },
      // 3. Uì ëª¨ì–‘
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 100, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 220, width: 300, height: 20 },
          { x: 80,  y: 80,  width: 20,  height: 140 },
          { x: 360, y: 80,  width: 20,  height: 160 },
          { x: 140, y: 80,  width: 220, height: 20 }
        ])
      },
      // 4. ê°€ìš´ë° ì„¬ ìˆëŠ” í˜•íƒœ
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 400, y: 260, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 120, y: 80,  width: 240, height: 20 },
          { x: 120, y: 80,  width: 20,  height: 160 },
          { x: 340, y: 80,  width: 20,  height: 160 },
          { x: 160, y: 200, width: 180, height: 20 }
        ])
      },
      // 5. Sì í†µë¡œ
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 60, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 220, width: 320, height: 20 },
          { x: 80,  y: 140, width: 20,  height: 80 },
          { x: 200, y: 140, width: 20,  height: 80 },
          { x: 200, y: 140, width: 200, height: 20 },
          { x: 360, y: 60,  width: 20,  height: 100 }
        ])
      },
      // 6. ì¢Œìš° ë‚˜ëˆ ì§„ í†µë¡œ
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 420, y: 180, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 120, y: 60,  width: 20,  height: 260 },
          { x: 240, y: 60,  width: 20,  height: 260 },
          { x: 360, y: 60,  width: 20,  height: 260 },
          { x: 120, y: 200, width: 120, height: 20 },
          { x: 240, y: 120, width: 120, height: 20 }
        ])
      },
      // 7. ã„±ì ì½”ë„ˆ ëŒê¸°
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 220, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 220, width: 260, height: 20 },
          { x: 80,  y: 120, width: 20,  height: 100 },
          { x: 260, y: 60,  width: 20,  height: 160 },
          { x: 260, y: 60,  width: 140, height: 20 },
          { x: 380, y: 60,  width: 20,  height: 140 }
        ])
      },
      // 8. ê°€ìš´ë° ì‹­ìí˜•
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 60, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 160, y: 80,  width: 160, height: 20 },
          { x: 160, y: 80,  width: 20,  height: 180 },
          { x: 300, y: 80,  width: 20,  height: 180 },
          { x: 160, y: 180, width: 160, height: 20 }
        ])
      },
      // 9. ìœ„ìª½ í†µë¡œ ìœ„ì£¼
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 420, y: 80, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 200, width: 320, height: 20 },
          { x: 80,  y: 120, width: 20,  height: 80 },
          { x: 200, y: 60,  width: 20,  height: 160 },
          { x: 200, y: 60,  width: 200, height: 20 },
          { x: 360, y: 80,  width: 20,  height: 120 }
        ])
      },
      // 10. ì„¸ë¡œ ê¸°ë‘¥ ì—¬ëŸ¬ ê°œ (ë‚œì´ë„â†‘)
      {
        player: { x: 60, y: 260 },
        snakeTree: { x: 380, y: 240, width: 70, height: 95 },
        walls: baseWalls.concat([
          { x: 80,  y: 220, width: 20,  height: 80 },
          { x: 140, y: 60,  width: 20,  height: 260 },
          { x: 220, y: 60,  width: 20,  height: 260 },
          { x: 300, y: 60,  width: 20,  height: 260 },
          { x: 380, y: 60,  width: 20,  height: 120 },
          { x: 300, y: 180, width: 100, height: 20 }
        ])
      }
    ];

    // í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë²½ ë°°ì—´
    let walls = [];

    const edenState = {
      player: { x: 0, y: 0, size: 18 },  // ëª¨ì„¸ ì¶©ëŒ ë°•ìŠ¤ í¬ê¸°
      snakeTree: { x: 0, y: 0, width: 60, height: 80 },
      speed: 2.5,
      mission1Done: false,
      running: false,
      currentLevelIndex: 0
    };

    // í‚¤ ìƒíƒœ (ê¾¹ ëˆ„ë¥´ë©´ ê³„ì† ì´ë™)
    const keys = {
      ArrowUp: false,
      ArrowDown: false,
      ArrowLeft: false,
      ArrowRight: false
    };

    // ëœë¤ ë ˆë²¨ ë¡œë“œ
    function loadRandomLevel() {
      const idx = Math.floor(Math.random() * edenLevels.length);
      edenState.currentLevelIndex = idx;
      const level = edenLevels[idx];

      console.log('ì§€ê¸ˆ ë¡œë”©ëœ ë¯¸ë¡œ ë²ˆí˜¸:', idx + 1);  // <- ì´ ì¤„ ì¶”ê°€

      edenState.player.x = level.player.x;
      edenState.player.y = level.player.y;

      edenState.snakeTree.x = level.snakeTree.x;
      edenState.snakeTree.y = level.snakeTree.y;
      edenState.snakeTree.width  = level.snakeTree.width  * SNAKE_SCALE;
      edenState.snakeTree.height = level.snakeTree.height * SNAKE_SCALE;

      walls = level.walls;
    }

    function resetEdenState() {
      loadRandomLevel(); // ë§¤ë²ˆ ê²Œì„ ì‹œì‘ ì‹œ ëœë¤ ë¯¸ë¡œ ì„ íƒ
      edenState.mission1Done = false;
      edenOverlay.classList.remove("active");
      dialogueBox.classList.add("empty");
      dialogueBox.textContent = "";

      keys.ArrowUp = keys.ArrowDown = keys.ArrowLeft = keys.ArrowRight = false;
    }

    function isWallCollision(px, py, size) {
      const half = size;
      const left = px - half;
      const right = px + half;
      const top = py - half;
      const bottom = py + half;

      for (const w of walls) {
        if (
          right > w.x &&
          left < w.x + w.width &&
          bottom > w.y &&
          top < w.y + w.height
        ) {
          return true;
        }
      }
      return false;
    }

    function isSnakeCollision() {
      const p = edenState.player;
      const t = edenState.snakeTree;
      const centerX = t.x;
      const centerY = t.y;
      const dx = p.x - centerX;
      const dy = p.y - centerY;
      return Math.sqrt(dx * dx + dy * dy) < 30; // ì¡°ê¸ˆ ë” íƒ€ì´íŠ¸í•œ ë²”ìœ„
    }

    function drawEdenScene() {
      const { width, height } = edenCanvas;

      // ë°°ê²½
      const gradient = ctx.createLinearGradient(0, 0, 0, height);
      gradient.addColorStop(0, "#bbf7d0");
      gradient.addColorStop(0.5, "#fef9c3");
      gradient.addColorStop(1, "#a5f3fc");
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, width, height);

      // ë¯¸ë¡œ ë²½
      ctx.fillStyle = "rgba(15, 23, 42, 0.35)";
      walls.forEach(w => ctx.fillRect(w.x, w.y, w.width, w.height));

      // ë±€+ë‚˜ë¬´
      const t = edenState.snakeTree;
      ctx.drawImage(snakeImg, t.x - t.width / 2, t.y - t.height / 2, t.width, t.height);

      // ëª¨ì„¸ (ì¡°ê¸ˆ ì‘ê²Œ ê·¸ë¦¼)
      const p = edenState.player;
      const imgW = 32;
      const imgH = 40;
      ctx.drawImage(playerImg, p.x - imgW / 2, p.y - imgH / 2, imgW, imgH);
    }

    function updateEden() {
      const p = edenState.player;
      const speed = edenState.speed;

      let dx = 0;
      let dy = 0;
      if (keys.ArrowUp) dy -= speed;
      if (keys.ArrowDown) dy += speed;
      if (keys.ArrowLeft) dx -= speed;
      if (keys.ArrowRight) dx += speed;

      if (dx === 0 && dy === 0) {
        return;
      }

      const oldX = p.x;
      const oldY = p.y;

      p.x += dx;
      p.y += dy;

      if (isWallCollision(p.x, p.y, p.size)) {
        p.x = oldX;
        p.y = oldY;
      }

      if (!edenState.mission1Done && isSnakeCollision()) {
        edenState.mission1Done = true;
        edenOverlay.classList.add("active");
        dialogueBox.classList.remove("empty");
        dialogueBox.innerHTML = `
          <p>
            <strong>ë±€:</strong>
            â€œì •ë§ë¡œ í•˜ë‚˜ë‹˜ì´ ë™ì‚° ëª¨ë“  ë‚˜ë¬´ì˜ ì—´ë§¤ë¥¼ ë¨¹ì§€ ë§ë¼ê³  í•˜ì…¨ë‹ˆ?â€
          </p>
          <p style="font-size:0.8rem; color:#4b5563; margin-top:0.2rem;">
            ìœ í˜¹ ì´í›„ ì‚¬ëŒì˜ ë§ˆìŒê³¼ ì‹œì„ ì´ ì–´ë–»ê²Œ ë³€í–ˆëŠ”ì§€ í•¨ê»˜ ìƒê°í•´ ë³´ì•„ìš”.
          </p>
        `;
      }
    }

    function gameLoop() {
      if (!edenState.running) return;
      updateEden();
      drawEdenScene();
      requestAnimationFrame(gameLoop);
    }

    function handleKeydown(e) {
      if (!edenState.running) return;
      if (keys.hasOwnProperty(e.key)) {
        e.preventDefault();
        keys[e.key] = true;
      }
    }

    function handleKeyup(e) {
      if (!edenState.running) return;
      if (keys.hasOwnProperty(e.key)) {
        keys[e.key] = false;
      }
    }

    function startEdenGame() {
      resetEdenState();
      edenState.running = true;
      window.addEventListener("keydown", handleKeydown);
      window.addEventListener("keyup", handleKeyup);
      drawEdenScene();
      requestAnimationFrame(gameLoop);
    }

    function stopEdenGame() {
      edenState.running = false;
      window.removeEventListener("keydown", handleKeydown);
      window.removeEventListener("keyup", handleKeyup);
      edenOverlay.classList.remove("active");
    }
  </script>

</body>
</html>
